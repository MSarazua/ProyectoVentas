CREATE DATABASE BD_UMG;
USE BD_UMG;

/*Ver tablas*/
select * from TB_PERSONA;
/***Ver tablas*/

drop table TB_PERSONA

create table TB_PERSONA(
ID int not null identity(1,1) primary key,
NOMBRE varchar(50),
APELLIDO varchar(50),
SEXO varchar(50),
TIPO_PERSONA int,
USUARIO varchar(50),
PASS varchar(50)
);

/*Ver tablas*/
select * from TB_PERSONA;
/*Ver tablas*/

/*Querys*/
INSERT  INTO TB_PERSONA(NOMBRE,APELLIDO,SEXO,TIPO_PERSONA,USUARIO,PASS) VALUES ('María', 'Sarazúa', 'F', 1, 'Msarazua', '123')
INSERT  INTO TB_PERSONA(NOMBRE,APELLIDO,SEXO,TIPO_PERSONA,USUARIO,PASS) VALUES ('Geovanni', 'Ramirez', 'M', 1, 'Gramirez', '1234')
INSERT  INTO TB_PERSONA(NOMBRE,APELLIDO,SEXO,TIPO_PERSONA,USUARIO,PASS) VALUES ('Rudy', 'Soto', 'M', 2, 'Rsoto', '1234')
/*Querys*/

select * from TB_PERSONA;
select * from TB_INVENTARIO;
select * from TB_VENTA;
drop table TB_DETALLE_VENTA;

CREATE TABLE TB_INVENTARIO(
   COD_PRODUTO INT IDENTITY PRIMARY KEY,
   PRODUCTO NVARCHAR(50) NOT NULL,
   DESCRIPCION NVARCHAR(500) NOT NULL,
   CANTIDAD INT NOT NULL,
   PRECIO NUMERIC(9,2) NOT NULL, 
   ESTATUS NVARCHAR(1)
)

CREATE TABLE TB_VENTA(
    FACTURA INT IDENTITY PRIMARY KEY,
	FECHA NVARCHAR(50), 
	NIT NVARCHAR(15),
	NOMBRE NVARCHAR(100), 
	DIRECCION NVARCHAR(100),
	MONTO_TOTAL INT, 
	CANTIDAD_PRODUCTOS INT,
	ESTATUS NVARCHAR(1)
)

CREATE TABLE TB_DETALLE_VENTA(
    ID INT IDENTITY,
	FACTURA INT NOT NULL,
	COD_PRODUCTO INT NOT NULL, 
	CANTIDAD INT NOT NULL,
	PRECIO INT NOT NULL, 
)

ALTER TABLE TB_DETALLE_VENTA ADD CONSTRAINT PK_DETALLE PRIMARY KEY(ID, FACTURA);

ALTER TABLE TB_DETALLE_VENTA ADD FOREIGN KEY (FACTURA) REFERENCES TB_VENTA(FACTURA);

ALTER TABLE TB_DETALLE_VENTA ADD FOREIGN KEY (COD_PRODUCTO) REFERENCES TB_INVENTARIO(COD_PRODUTO);
